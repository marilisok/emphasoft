(this.webpackJsonpemphasoft_task=this.webpackJsonpemphasoft_task||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(11),i=n.n(s),o=(n(86),n(17)),u=n(151),j=n(174),l=n(154),b=n(5),d=Object(u.a)((function(){return Object(j.a)({root:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}})})),p=function(){var e=d();return Object(b.jsx)("div",{className:e.root,children:Object(b.jsx)(l.a,{})})},O=n(9),m=n(28),f=n.n(m),h=n(40),x=n(54),v=n.n(x),g="http://emphasoft-test-assignment.herokuapp.com",w=/api-token-auth/,k=function(){var e=Object(h.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(g).concat(w),{username:t,password:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(g).concat("/api/v1/users/"),{headers:{Authorization:"Token ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(a.createContext)({}),_=function(e){var t=e.children,n=Object(a.useState)(localStorage.getItem("token")),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),u=Object(o.a)(i,2),j=u[0],l=u[1],d=Object(a.useState)(!1),m=Object(o.a)(d,2),f=m[0],h=m[1],x=Object(O.g)();if(j)return Object(b.jsx)(p,{});var v={token:c,loading:j,error:f,login:function(e,t){l(!0),k(e,t).then((function(e){s(e.data.token),localStorage.setItem("token",e.data.token),x.push("/")})).catch((function(e){h(e);var t=setTimeout((function(){clearTimeout(t),h(!1)}),5e3)})).finally((function(){return l(!1)}))}};return Object(b.jsx)(y.Provider,{value:v,children:t})},C=n(45),T=n(30),I=n(75),N=n(156),W=n(158),D=n(159),E=n(117),L=n(172),A=n(160),F=n(173),P=Object(u.a)((function(e){return Object(j.a)({alert:{position:"absolute",top:0,left:"50%",transform:"translate(-50%)"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})})),U={username:[function(e){return!!e||"username is required"},function(e){return e.length<=150||"max length 150"},function(e){return/^[\w.@+-]+$/.test(e)||"invalid format"}],password:[function(e){return!!e||"password is required"}]},q=function(){var e=P(),t=e.paper,n=e.form,r=e.submit,c=e.alert,s=Object(a.useState)({username:{value:"",error:!1},password:{value:"",error:!1}}),i=Object(o.a)(s,2),u=i[0],j=i[1],l=Object(a.useContext)(y),d=l.login,m=l.loading,x=l.error,v=l.token,g=function(){var e=!0,t=Object.fromEntries(Object.entries(u).map((function(t){var n=Object(o.a)(t,2),r=n[0],a=n[1].value,c=function(e,t){var n,r=Object(I.a)(t);try{for(r.s();!(n=r.n()).done;){var a=(0,n.value)(e,u);if(!0!==a)return a}}catch(c){r.e(c)}finally{r.f()}return!0}(a,U[r]),s=!1;return!0!==c&&(s=c,e=!1),[r,{value:a,error:s}]})));return j(t),e},w=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),g()&&d(u.username.value,u.password.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t){j((function(n){return Object(T.a)(Object(T.a)({},n),{},Object(C.a)({},e,{value:t,error:!1}))}))};return v?Object(b.jsx)(O.a,{to:"/"}):m?Object(b.jsx)(p,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:c,children:Object(b.jsx)(N.a,{in:Boolean(x),children:Object(b.jsx)(F.a,{severity:"error",children:"User with such username and password isn't exist"})})}),Object(b.jsxs)(W.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(D.a,{}),Object(b.jsxs)("div",{className:t,children:[Object(b.jsx)(E.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(b.jsxs)("form",{className:n,onSubmit:w,children:[Object(b.jsx)(L.a,{fullWidth:!0,autoFocus:!0,variant:"outlined",margin:"normal",id:"username",label:"Username",name:"username",autoComplete:"username",value:u.username.value,error:!!u.username.error,helperText:u.username.error?u.username.error:" ",onChange:function(e){return k("username",e.currentTarget.value)}}),Object(b.jsx)(L.a,{fullWidth:!0,variant:"outlined",margin:"normal",name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u.password.value,error:!!u.password.error,helperText:u.password.error?u.password.error:" ",onChange:function(e){return k("password",e.currentTarget.value)}}),Object(b.jsx)(A.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary",className:r,children:"Sign In"})]})]})]})]})},B=n(76),J=function(e){var t=e.component,n=Object(B.a)(e,["component"]),r=Object(a.useContext)(y).token;return Object(b.jsx)(O.b,Object(T.a)(Object(T.a)({},n),{},{render:function(e){return r?Object(b.jsx)(t,Object(T.a)({},e)):Object(b.jsx)(O.a,{to:"/login/sign-in"})}}))},z=n(161),H=n(157),M=n(162),X=n(163),$=n(165),G=n(166),K=n(167),Q=n(168),R=n(175),V=n(169);!function(e){e.id="ID",e.username="Username",e.first_name="First name",e.last_name="Last name",e.is_active="Active",e.last_login="Last login",e.is_superuser="Is Superuser"}(r||(r={}));var Y=n(164),Z=n(170),ee=n(171),te=Object(u.a)((function(e){return Object(j.a)({container:{maxWidth:"100%",width:"100%",overflowX:"scroll"},table:{marginTop:e.spacing(3),width:"max-content",minWidth:"100%"},searchInput:{marginTop:e.spacing(3),width:"50%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})}));function ne(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function re(e,t){return"desc"===e?function(e,n){return ne(e,n,t)}:function(e,n){return-ne(e,n,t)}}function ae(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ce=function(){var e=te(),t=Object(a.useContext)(y).token,n=Object(a.useState)([]),c=Object(o.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),l=j[0],d=j[1],p=Object(a.useState)("asc"),O=Object(o.a)(p,2),m=O[0],f=O[1],h=Object(a.useState)("id"),x=Object(o.a)(h,2),v=x[0];x[1];Object(a.useEffect)((function(){t&&S(t).then((function(e){var t=ae(e.data,re(m,v));i(t)})).catch((function(e){return console.log(e)}))}),[t]),Object(a.useEffect)((function(){var e=ae(s,re(m,v));i(e)}),[m,v]);var g=function(){f("asc"===m?"desc":"asc")};return Object(b.jsxs)(z.a,{component:H.a,children:[Object(b.jsx)(M.a,{children:Object(b.jsx)(L.a,{variant:"outlined",label:"Search Employees",id:"input-with-icon-textfield",className:e.searchInput,onChange:function(e){return d(e.target.value)},InputProps:{startAdornment:Object(b.jsx)(X.a,{position:"start",children:Object(b.jsx)(Y.a,{})})}})}),Object(b.jsx)("div",{className:e.container,children:Object(b.jsxs)($.a,{className:e.table,"aria-label":"a dense table",children:[Object(b.jsx)(G.a,{children:Object(b.jsx)(K.a,{children:Object.entries(r).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(b.jsxs)(Q.a,{sortDirection:v===n&&m,children:[r,Object(b.jsx)(R.a,{active:v===n,direction:v===n?m:"asc",onClick:g})]},n)}))})}),Object(b.jsx)(V.a,{children:(""===l?s:s.filter((function(e){return e.username.toLowerCase().includes(l)}))).map((function(e){return Object(b.jsxs)(K.a,{children:[Object(b.jsx)(Q.a,{component:"th",scope:"row",children:e.id}),Object(b.jsx)(Q.a,{children:e.username}),Object(b.jsx)(Q.a,{children:e.first_name}),Object(b.jsx)(Q.a,{children:e.last_name}),Object(b.jsx)(Q.a,{children:e.is_active?Object(b.jsx)(Z.a,{}):Object(b.jsx)(ee.a,{})}),Object(b.jsx)(Q.a,{align:"center",children:e.last_login?new Date(e.last_login).toLocaleString():"-"}),Object(b.jsx)(Q.a,{children:e.is_superuser?Object(b.jsx)(Z.a,{}):Object(b.jsx)(ee.a,{})})]},e.id)}))})]})})]})},se=n(52),ie=function(){return Object(b.jsx)(_,{children:Object(b.jsx)(se.a,{children:Object(b.jsxs)(O.d,{children:[Object(b.jsx)(J,{exact:!0,path:"/",component:ce}),Object(b.jsx)(O.b,{exact:!0,path:"/login/sign-in",children:Object(b.jsx)(q,{})})]})})})};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(ie,{})}),document.getElementById("root"))},86:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.2ba59fc2.chunk.js.map