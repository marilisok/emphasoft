{"version":3,"sources":["services/general/model.ts","components/UI/Loader.tsx","services/general/constants.ts","services/userAPI.ts","Auth.tsx","components/Login/SignIn.tsx","PrivateRoute.tsx","pages/Home.tsx","App.tsx","index.tsx"],"names":["TableTitles","useStyles","makeStyles","createStyles","root","position","top","left","transform","Loader","classes","className","CircularProgress","BASE_URL","API_TOKEN_AUTH","signIn","username","password","a","axios","post","getUsers","token","get","headers","Authorization","AuthContext","createContext","AuthProvider","children","useState","localStorage","getItem","setToken","loading","setLoading","error","setError","history","useHistory","value","login","then","res","data","setItem","push","catch","newError","timer","setTimeout","clearTimeout","finally","Provider","theme","alert","paper","marginTop","spacing","display","flexDirection","alignItems","form","width","submit","margin","rules","v","length","test","SignIn","state","setState","useContext","formValidation","formValid","newState","Object","fromEntries","entries","map","name","rule","fieldValidation","submitHandler","e","preventDefault","handleChange","prevState","to","Collapse","in","Boolean","Alert","severity","Container","component","maxWidth","CssBaseline","Typography","variant","onSubmit","TextField","fullWidth","autoFocus","id","label","autoComplete","helperText","onChange","currentTarget","type","Button","color","PrivateRoute","RouteComponent","rest","render","routeProps","container","overflowX","table","minWidth","searchInput","visuallyHidden","border","clip","height","overflow","padding","descendingComparator","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","el","index","sort","Home","styles","users","setUsers","searchTerm","setSearchTerm","setOrder","useEffect","sortedUsers","err","console","log","handleRequestSort","TableContainer","Paper","Toolbar","target","InputProps","startAdornment","InputAdornment","Search","Table","aria-label","TableHead","TableRow","title","TableCell","sortDirection","TableSortLabel","active","direction","onClick","TableBody","filter","user","toLowerCase","includes","scope","first_name","last_name","is_active","Check","Clear","align","last_login","Date","toLocaleString","is_superuser","App","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2ba59fc2.chunk.js","sourcesContent":["import { RouteProps } from \"react-router\";\n\nexport type Order = 'asc' | 'desc';\n\nexport interface User {\n\tid: number;\n\tusername: string;\n\tfirst_name: string;\n\tlast_name: string;\n\tis_active: boolean;\n\tlast_login: string;\n\tis_superuser: boolean;\n}\n\nexport enum TableTitles {\n\tid = \"ID\",\n\tusername = \"Username\",\n\tfirst_name = \"First name\",\n\tlast_name = \"Last name\",\n\tis_active = \"Active\",\n\tlast_login = \"Last login\",\n\tis_superuser = \"Is Superuser\",\n}\nexport interface PrivateRouteProps extends RouteProps {\n\tcomponent: any;\n}\n","import { CircularProgress, createStyles, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%,-50%)\",\n    },\n  })\n);\n\nexport const Loader = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <CircularProgress />\n    </div>\n  );\n};\n","export const BASE_URL = \"http://emphasoft-test-assignment.herokuapp.com\";\nexport const API_TOKEN_AUTH = /api-token-auth/;\nexport const API_V1_USERS = \"/api/v1/users/\";\n","import axios from \"axios\";\nimport {API_TOKEN_AUTH, API_V1_USERS, BASE_URL} from \"./general/constants\";\n\n\nexport const signIn = async (username: string, password: string) => {\n\treturn await axios\n\t\t.post(`${BASE_URL}${API_TOKEN_AUTH}`, {\n\t\t\tusername: username,\n\t\t\tpassword: password,\n\t\t})\n};\n\nexport const getUsers = async (token: string) =>{\n\treturn await axios.get(`${BASE_URL}${API_V1_USERS}`, {\n\t\theaders: {\n\t\t\tAuthorization: `Token ${token}`,\n\t\t},\n\t});\n};\n","import React, { createContext, ReactNode, useState } from \"react\";\nimport { Loader } from \"./components/UI/Loader\";\nimport { useHistory } from \"react-router\";\nimport { signIn } from \"./services/userAPI\";\n\nexport interface AuthContextType {\n  token: string;\n  loading: boolean;\n  login: (username: string, password: string) => void;\n  error?: any;\n}\nexport const AuthContext = createContext<AuthContextType>(\n  {} as AuthContextType\n);\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [token, setToken] = useState<string | null>(\n    localStorage.getItem(\"token\")\n  );\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const history = useHistory();\n\n  const login = (username: string, password: string) => {\n    setLoading(true);\n\n    signIn(username, password)\n      .then((res) => {\n        setToken(res.data.token);\n        localStorage.setItem(\"token\", res.data.token);\n        history.push(\"/\");\n      })\n      .catch((newError) => {\n        setError(newError);\n        const timer = setTimeout(() => {\n          clearTimeout(timer);\n          setError(false);\n        }, 5000);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  const value = {\n    token,\n    loading,\n    error,\n    login,\n  };\n\n  return (\n    <AuthContext.Provider value={value as AuthContextType}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import React, { FormEvent, useContext, useState } from \"react\";\nimport {\n  Button,\n  Collapse,\n  Container,\n  createStyles,\n  CssBaseline,\n  makeStyles,\n  TextField,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport { Loader } from \"../UI/Loader\";\nimport { Redirect } from \"react-router\";\nimport { AuthContext } from \"../../Auth\";\nimport { Alert } from \"@material-ui/lab\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    alert: {\n      position: \"absolute\",\n      top: 0,\n      left: \"50%\",\n      transform: \"translate(-50%)\",\n    },\n    paper: {\n      marginTop: theme.spacing(8),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n    },\n    form: {\n      width: \"100%\",\n      marginTop: theme.spacing(1),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n  })\n);\ninterface SignInState {\n  [key: string]: { value: string; error: string | false };\n}\n\nexport type RuleType = (v: string, state?: SignInState) => string | true;\n\nexport type RulesType = {\n  [key: string]: RuleType[];\n};\n\nconst rules: RulesType = {\n  username: [\n    (v) => !!v || \"username is required\",\n    (v) => v.length <= 150 || \"max length 150\",\n    (v) => /^[\\w.@+-]+$/.test(v) || \"invalid format\",\n  ],\n  password: [(v) => !!v || \"password is required\"],\n};\n\nexport const SignIn = () => {\n  const { paper, form, submit, alert } = useStyles();\n  const [state, setState] = useState<SignInState>({\n    username: { value: \"\", error: false },\n    password: { value: \"\", error: false },\n  });\n  const { login, loading, error, token } = useContext(AuthContext);\n\n  const fieldValidation = (value: string, rules: RuleType[]): string | true => {\n    for (const rule of rules) {\n      const res = rule(value, state);\n      if (res !== true) return res;\n    }\n    return true;\n  };\n\n  const formValidation = (): boolean => {\n    let formValid = true;\n    const newState: SignInState = Object.fromEntries(\n      Object.entries(state).map(([name, { value }]) => {\n        const res = fieldValidation(value, rules[name]);\n        let error: string | false = false;\n        if (res !== true) {\n          error = res;\n          formValid = false;\n        }\n        return [name, { value, error }];\n      })\n    );\n\n    setState(newState);\n    return formValid;\n  };\n\n  const submitHandler = async (e: FormEvent) => {\n    e.preventDefault();\n    if (formValidation()) login(state.username.value, state.password.value);\n  };\n\n  const handleChange = (name: string, value: string): void => {\n    setState((prevState) => {\n      return {\n        ...prevState,\n        [name]: { value, error: false },\n      };\n    });\n  };\n\n  if (token) {\n    return <Redirect to=\"/\" />;\n  }\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <>\n      <div className={alert}>\n        <Collapse in={Boolean(error)}>\n          <Alert severity=\"error\">\n            {\"User with such username and password isn't exist\"}\n          </Alert>\n        </Collapse>\n      </div>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <CssBaseline />\n        <div className={paper}>\n          <Typography component=\"h1\" variant=\"h5\">\n            Sign in\n          </Typography>\n          <form className={form} onSubmit={submitHandler}>\n            <TextField\n              fullWidth\n              autoFocus\n              variant=\"outlined\"\n              margin=\"normal\"\n              id=\"username\"\n              label=\"Username\"\n              name=\"username\"\n              autoComplete=\"username\"\n              value={state.username.value}\n              error={!!state.username.error}\n              helperText={state.username.error ? state.username.error : \" \"}\n              onChange={(e) => handleChange(\"username\", e.currentTarget.value)}\n            />\n            <TextField\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={state.password.value}\n              error={!!state.password.error}\n              helperText={state.password.error ? state.password.error : \" \"}\n              onChange={(e) => handleChange(\"password\", e.currentTarget.value)}\n            />\n            <Button\n              fullWidth\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              className={submit}\n            >\n              Sign In\n            </Button>\n          </form>\n        </div>\n      </Container>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { AuthContext } from \"./Auth\";\nimport { PrivateRouteProps } from \"./services/general/model\";\n\nexport const PrivateRoute: React.FC<PrivateRouteProps> = ({\n  component: RouteComponent,\n  ...rest\n}) => {\n\n  const { token } = useContext(AuthContext);\n\n  return (\n    <Route\n      {...rest}\n      render={(routeProps) =>\n        token ? (\n          <RouteComponent {...routeProps} />\n        ) : (\n          <Redirect to={\"/login/sign-in\"} />\n        )\n      }\n    />\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../Auth\";\nimport { getUsers } from \"../services/userAPI\";\nimport {\n  createStyles,\n  InputAdornment,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TableSortLabel,\n  TextField,\n  Theme,\n  Toolbar,\n} from \"@material-ui/core\";\nimport { Order, TableTitles, User } from \"../services/general/model\";\nimport { Search, Check, Clear } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      maxWidth: \"100%\",\n      width: \"100%\",\n      overflowX: \"scroll\",\n    },\n    table: {\n      marginTop: theme.spacing(3),\n      width: \"max-content\",\n      minWidth: \"100%\",\n    },\n    searchInput: {\n      marginTop: theme.spacing(3),\n      width: \"50%\",\n    },\n    visuallyHidden: {\n      border: 0,\n      clip: \"rect(0 0 0 0)\",\n      height: 1,\n      margin: -1,\n      overflow: \"hidden\",\n      padding: 0,\n      position: \"absolute\",\n      top: 20,\n      width: 1,\n    },\n  })\n);\n\nfunction descendingComparator<T>(a: T, b: T, orderBy: keyof T) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator<T>(\n  order: Order,\n  orderBy: keyof T\n): (\n  a: { [key in keyof T]: T[key] },\n  b: { [key in keyof T]: T[key] }\n) => number {\n  return order === \"desc\"\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort<T>(array: T[], comparator: (a: T, b: T) => number) {\n  const stabilizedThis = array.map((el, index) => [el, index] as [T, number]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\nexport const Home = () => {\n  const styles = useStyles();\n  const { token } = useContext(AuthContext);\n  const [users, setUsers] = useState<User[]>([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [order, setOrder] = useState<Order>(\"asc\");\n  const [orderBy, setOrderBy] = useState<keyof User>(\"id\");\n  useEffect(() => {\n    if (token) {\n      getUsers(token)\n        .then((res) => {\n          const sortedUsers: User[] = stableSort(\n            res.data,\n            getComparator<User>(order, orderBy)\n          );\n          setUsers(sortedUsers);\n        })\n        .catch((err) => console.log(err));\n    }\n  }, [token]);\n\n  useEffect(() => {\n    const sortedUsers: User[] = stableSort(\n      users,\n      getComparator<User>(order, orderBy)\n    );\n    setUsers(sortedUsers);\n  }, [order, orderBy]);\n\n  const filteredUsers = () => {\n    if (searchTerm === \"\") return users;\n    else {\n      return users.filter((user: User) =>\n        user.username.toLowerCase().includes(searchTerm)\n      );\n    }\n  };\n  const handleRequestSort = () => {\n    setOrder(order === \"asc\" ? \"desc\" : \"asc\");\n  };\n\n  return (\n    <TableContainer component={Paper}>\n      <Toolbar>\n        <TextField\n          variant=\"outlined\"\n          label=\"Search Employees\"\n          id=\"input-with-icon-textfield\"\n          className={styles.searchInput}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Search />\n              </InputAdornment>\n            ),\n          }}\n        />\n      </Toolbar>\n      <div className={styles.container}>\n        <Table className={styles.table} aria-label=\"a dense table\">\n          <TableHead>\n            <TableRow>\n              {Object.entries(TableTitles).map(([title, label]) => (\n                <TableCell\n                  key={title}\n                  sortDirection={orderBy === title ? order : false}\n                >\n                  {label}\n                  <TableSortLabel\n                    active={orderBy === title}\n                    direction={orderBy === title ? order : \"asc\"}\n                    onClick={handleRequestSort}\n                  />\n                </TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {filteredUsers().map((user) => (\n              <TableRow key={user.id}>\n                <TableCell  component=\"th\" scope=\"row\">\n                  {user.id}\n                </TableCell>\n                <TableCell >{user.username}</TableCell>\n                <TableCell >{user.first_name}</TableCell>\n                <TableCell >{user.last_name}</TableCell>\n                <TableCell >\n                  {user.is_active ? <Check /> : <Clear />}\n                </TableCell>\n                <TableCell align=\"center\">\n                  {user.last_login\n                    ? new Date(user.last_login).toLocaleString()\n                    : \"-\"}\n                </TableCell>\n                <TableCell >\n                  {user.is_superuser ? <Check /> : <Clear />}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    </TableContainer>\n  );\n};\n","import React from \"react\";\nimport { AuthProvider } from \"./Auth\";\nimport { SignIn } from \"./components/Login/SignIn\";\nimport { PrivateRoute } from \"./PrivateRoute\";\nimport { Home } from \"./pages/Home\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nconst App = () => {\n  return (\n    <AuthProvider>\n      <Router>\n        <Switch>\n          <PrivateRoute exact path=\"/\" component={Home} />\n          <Route exact path=\"/login/sign-in\">\n            <SignIn />\n          </Route>\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}